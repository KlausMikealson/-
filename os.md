### 资源分配策略：
 - 静态分配策略
 - 动态分配策略

### 操作系统的基本功能（从资源管理的角度）：
 - 进程、线程管理（CPU管理）
 > 进程、线程状态、控制、同步互斥、通信、调度...
 - 存储管理
 > 分配、回收、地址转换、存储保护、内存扩充...
 - 文件管理
 > 文件目录、文件操作、磁盘空间、文件存取控制...
 - 设备管理
 > 设备驱动、分配回收、缓冲技术...
 - 用户接口
 > 系统命令、编程接口

### 操作系统的特征：
 - 并发：处理多个同时性活动
 - 共享：操作系统与多个用户程序共同使用计算机系统资源
    - 互斥共享
    - 同时共享
 - 虚拟：一个物理实体映射为若干个对应的逻辑实体——分时或分空间
 - 随机：操作系统必须随时对以不可预测的次序发生的事情进行响应并处理

### 操作系统的分类：
 - 批处理操作系统
    - 单道批处理系统
    - 多道批处理系统
 > 追求资源利用率，增加作业处理吞吐量
 - 分时操作系统
 - 实时操作系统
 > 对外部请求在严格时间范围内做出响应、高可靠性
 - 个人计算机操作系统
 - 网络操作系统
 - 分布式操作系统
 - 嵌入式操作系统
 
### SPOOLING 系统工作原理：
 - 用户作业加载到磁盘上的输入井
 - 按照某种调度策略选择几个搭配得当的作业，调入内存
 - 作业运行的结果输出到磁盘上的输出井
 - 运行结果从磁盘上的输出井送到打印机

### 中央处理器（CPU）：
 - 由运算器、控制器、一系列的寄存器以及高速缓存构成

### 两类寄存器：
 - 用户可见寄存器：高级语言编译器通过优化算法分配并使用之，以减少程序访问内存的次数
 - 控制和状态寄存器：用于控制处理器的操作，通常由操作系统代码使用
   - 常见的控制和状态寄存器：
      - 程序计数器：记录将要取出的指令的地址
      - 指令寄存器：记录最近取出的指令
      - 程序状态字：记录处理器的运行状态，如条件码、模式、控制位等信息

### CPU 状态之间的转换：
 - 用户态->内核态：中断/异常/陷入机制
 - 内核态->用户态：设置程序状态字PSW

### 陷入指令 == 访管指令：
 > 提供给用户程序的接口，用于调用操作系统的功能

### 中断异常机制：
 > CPU 对系统发生的某一事件的作出的一种反应
 > CPU 暂停正在执行的程序，保留现场后自动转去执行相应事件的处理程序，处理完成后返回断点，继续执行被打断的程序
 - 作用：
    - 及时处理设备发来的中断请求
    - 可以使OS捕获用户程序提出的服务请求
    - 防止用户程序执行过程中的破坏性活动
 - 特点：
    - 随机发生
    - 自动处理
    - 可恢复
 - 机制引入的原因：
    - 中断的引入：为了支持 CPU 与设备之间的并行操作
    - 异常的引入：表示 CPU 执行指令时本身出现的问题
    
### 事件：
 - 中断（外中断）：
    - IO中断：Ctrl+C、网卡接收到新的数据包、打印机结束、读盘结束
    - 时钟中断：定时器时间到、CPU时间片结束
    - 硬件故障：电脑没电、读内存奇偶校验出错
 - 异常（内中断）：
    - 系统调用
    - 页故障/页错误
    - 保护性异常
    - 断点指令
    - 其他程序性异常（如算法溢出）
    
### 中断/异常机制的工作原理：
 - 硬件：捕获中断源发出的中断/异常请求，以一定方式响应，将处理器控制权交给特定的处理程序
 - 软件：识别中断/异常类型并完成相应的处理

### 中断向量：
 > 一个内存单元：存放中断处理程序入口地址和程序运行时所需要的处理机状态字

### 资源：
 - 可重用资源：
    - 可抢占资源：CPU
    - 不可抢占资源：打印机
 - 可消耗资源：信号、中断、消息
 
### 资源分配图的化简：
1. 找一个非孤立、且只有分配边的进程结点，去掉分配边，将其变成孤立节点
2. 再把相应的资源分配给一个等待该资源的进程

### 死锁的四个必要条件：
 - 互斥
 - 占有并等待
 - 非抢占
 - 循环等待
 
### 解决死锁：
 - 鸵鸟算法
 - 不让死锁发生： 
    - 预防死锁（静态）：
       - 破坏互斥：把独占资源变为共享资源、SPOLLING技术
       - 破坏占有并等待：
          - 运行前一次性申请好所有资源->资源利用率低、饥饿
          - 一直得不到资源则放弃已占有的
       - 破坏非抢占：优先级，局限性：适用于状态易于保存和恢复：cpu、内存
       - 破坏循环等待：资源有序分配
    - 预防死锁（动态）：跟踪并评估资源分配过程，根据评估结果决策是否分配
 - 让死锁发生：
    - 死锁检测与解除
    
### 线程和进程的区别：
 - 进程是OS对资源进行分配和调度的基本单位，实现了OS的并发
 - 线程是cpu调度的基本单位，实现了进程内部的并发
 -  一个程序至少有一个进程，一个进程至少有一个线程，线程依赖进程而存在
 - 进程有独立的内存单元，线程共享线程的内存
 
### 进程通信方式：
 - 无名管道：
    - 半双工
    - 只能用于具有亲缘关系的进程通信
    - 特殊的文件，不属于任何文件系统，在内存
    - 速度慢
    - 容量有限
 - 命名管道：
    - 可以用于无关进程之间的通信
    - 以特殊设备文件的形式存在于文件系统中
    - 速度慢
 - 消息队列
    - 第一次读的时候，要考虑上一次没有读完数据的问题
    - 一个消息队列由一个标识符来识别
    - 独立于发送与接收进程
    - 可以实现消息的随机查询，消息不一定要以先进先出的次序读取，也可以按消息类型
 - 信号量：
    - 不能传递复杂消息，只能用来同步
 - 共享内存：
    - 速度快
    - 会有线程安全的问题







